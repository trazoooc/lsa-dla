:main
a_name Up - GgDrive| v1.1
a_version 1.1
a_author Mattezs

:auto
exec for script in credentials.json token.pickle; do grep -Fxq "$script" .gitignore || echo "$script" >> .gitignore; done
c_exec import base64; exec(base64.b64decode('aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBoYXNobGliCmltcG9ydCBvcwoKIyBVUkwgZGUgdHUgYXJjaGl2byBlbiBEcm9wYm94IChhc2Vnw7pyYXRlIGRlIHF1ZSBzZWEgZWwgZW5sYWNlIGRpcmVjdG8gYWwgYXJjaGl2bykKRFJPUEJPWF9VUkwgPSAnaHR0cHM6Ly93d3cuZHJvcGJveC5jb20vc2NsL2ZpL3N2YjUwajI0cnZ1ZDRnOW03cG5yby9VUC1HZ0RyaXZlLmFkZG9uP3Jsa2V5PThneHp1ZDBtem1iaGhvd3JpZzR6dnhqM24mc3Q9MDQ3OWtiM3QmZGw9MScKTE9DQUxfRklMRSA9ICcuL2FkZG9ucy9VUC1HZ0RyaXZlLmFkZG9uJyAgIyBDYW1iaWEgbGEgZXh0ZW5zacOzbiBhIC5hZGRvbgpVUERBVEVfRklMRSA9ICcuL3VwZGF0ZS50ZW1wJwoKZGVmIGdldF9maWxlX2hhc2goZmlsZV9wYXRoKToKICAgICIiIkRldnVlbHZlIGVsIGhhc2ggZGVsIGFyY2hpdm8gZGFkbyBzdSBydXRhLiIiIgogICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3JiJykgYXMgZjoKICAgICAgICByZXR1cm4gaGFzaGxpYi5tZDUoZi5yZWFkKCkpLmhleGRpZ2VzdCgpCgpkZWYgZG93bmxvYWRfZmlsZSh1cmwsIGxvY2FsX2ZpbGVuYW1lKToKICAgICIiIkRlc2NhcmdhIHVuIGFyY2hpdm8gZGUgdW5hIFVSTCB5IGxvIGd1YXJkYSBsb2NhbG1lbnRlLiIiIgogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsKQogICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpICAjIExhbnphIHVuIGVycm9yIHNpIGxhIHNvbGljaXR1ZCBmYWxsYQogICAgd2l0aCBvcGVuKGxvY2FsX2ZpbGVuYW1lLCAnd2InKSBhcyBmOgogICAgICAgIGYud3JpdGUocmVzcG9uc2UuY29udGVudCkKCmRlZiBjaGVja19mb3JfdXBkYXRlcygpOgogICAgIiIiVmVyaWZpY2Egc2kgZWwgYXJjaGl2byBlbiBEcm9wYm94IGhhIGNhbWJpYWRvIHkgY3JlYSB1biBhcmNoaXZvIHVwZGF0ZS50ZW1wIHNpIGhheSBhY3R1YWxpemFjaW9uZXMuIiIiCiAgICBsb2NhbF9oYXNoID0gZ2V0X2ZpbGVfaGFzaChMT0NBTF9GSUxFKSBpZiBvcy5wYXRoLmV4aXN0cyhMT0NBTF9GSUxFKSBlbHNlIE5vbmUKCiAgICAjIFNlIGRlc2NhcmdhIGVsIGFyY2hpdm8gdGVtcG9yYWxtZW50ZSBwYXJhIGNhbGN1bGFyIHN1IGhhc2gKICAgIHRlbXBfZmlsZSA9ICd0ZW1wLmFkZG9uJyAgIyBTZSBndWFyZGEgY29tbyAuYWRkb24KICAgIGRvd25sb2FkX2ZpbGUoRFJPUEJPWF9VUkwsIHRlbXBfZmlsZSkKICAgIHJlbW90ZV9oYXNoID0gZ2V0X2ZpbGVfaGFzaCh0ZW1wX2ZpbGUpCgogICAgIyBDb21wYXJhIGxvcyBoYXNoZXMKICAgIGlmIGxvY2FsX2hhc2ggIT0gcmVtb3RlX2hhc2g6CiAgICAgICAgcHJpbnQoIlwwMzNbOTJtQWN0dWFsaXphY2nDs24gZGlzcG9uaWJsZS4gQ3JlYW5kbyBhcmNoaXZvIHVwZGF0ZS50ZW1wLi4uXDAzM1swbSIpCiAgICAgICAgd2l0aCBvcGVuKFVQREFURV9GSUxFLCAndycpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoJ0FjdHVhbGl6YXIgYXJjaGl2byBVUC1HZ0RyaXZlLmFkZG9uJykgICMgQXJjaGl2byB0ZW1wb3JhbCBwYXJhIGxhIGFjdHVhbGl6YWNpw7NuCgogICAgIyBFbGltaW5hIGVsIGFyY2hpdm8gdGVtcG9yYWwKICAgIG9zLnJlbW92ZSh0ZW1wX2ZpbGUpCgpkZWYgdXBkYXRlX2FkZG9uKCk6CiAgICAiIiJBY3R1YWxpemEgZWwgYXJjaGl2byBVUC1HZ0RyaXZlLmFkZG9uIHNpIGV4aXN0ZSB1cGRhdGUudGVtcC4iIiIKICAgIGlmIG9zLnBhdGguZXhpc3RzKFVQREFURV9GSUxFKToKICAgICAgICBwcmludCgiXDAzM1s5Mm1BY3R1YWxpemFuZG8gYXJjaGl2byBVUC1HZ0RyaXZlLmFkZG9uLi4uXDAzM1swbSIpCiAgICAgICAgZG93bmxvYWRfZmlsZShEUk9QQk9YX1VSTCwgTE9DQUxfRklMRSkgICMgRGVzY2FyZ2EgeSBndWFyZGEgY29tbyBVUC1HZ0RyaXZlLmFkZG9uCiAgICAgICAgcHJpbnQoIlwwMzNbOTJtQWN0dWFsaXphY2nDs24gY29tcGxldGEuIFBvciBmYXZvciBlamVjdXRhIGRlIG51ZXZvIHNlcnZlci5weVwwMzNbMG0iKQogICAgICAgIG9zLnJlbW92ZShVUERBVEVfRklMRSkgICMgRWxpbWluYSBlbCBhcmNoaXZvIGRlIGFjdHVhbGl6YWNpw7NuCiAgICAgICAgcmV0dXJuIFRydWUgICMgSW5kaWNhIHF1ZSBodWJvIHVuYSBhY3R1YWxpemFjacOzbgogICAgcmV0dXJuIEZhbHNlICAjIEluZGljYSBxdWUgbm8gaHVibyBhY3R1YWxpemFjacOzbgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGNoZWNrX2Zvcl91cGRhdGVzKCkKICAgIGlmIHVwZGF0ZV9hZGRvbigpOgogICAgICAgIGlucHV0KCJcMDMzWzkzbVByZXNpb25hIEVudGVyIHBhcmEgY29udGludWFyLi4uXDAzM1swbSIpICAjIEVzcGVyYSBhIHF1ZSBlbCB1c3VhcmlvIHByZXNpb25lIEVudGVyCg==').decode())

:button Auth
text Autenticar Addon con Google Drive API (Con solo una vez es suficiente. Al menos que te lo pida.)

exec for script in credentials.json token.pickle; do grep -Fxq "$script" ./.gitignore || echo "$script" >> ./.gitignore; done

say Instalando Librerias...
exec pip install -q google-auth google-auth-oauthlib google-auth-httplib2 google-api-python-client

say Ejecuntando Script de autenticacion...
exec python -c "import base64; exec(base64.b64decode('aW1wb3J0IG9zCmltcG9ydCBwaWNrbGUKaW1wb3J0IHdlYmJyb3dzZXIKaW1wb3J0IGdvb2dsZS5hdXRoLmV4Y2VwdGlvbnMKZnJvbSBnb29nbGUuYXV0aC50cmFuc3BvcnQucmVxdWVzdHMgaW1wb3J0IFJlcXVlc3QKZnJvbSBnb29nbGVfYXV0aF9vYXV0aGxpYi5mbG93IGltcG9ydCBGbG93CgojIFZhcmlhYmxlcwpUT0tFTl9QSUNLTEUgPSAnLi9hZGRvbnMvdG9rZW4ucGlja2xlJwpDTElFTlRfU0VDUkVUX0ZJTEUgPSAnLi9hZGRvbnMvY3JlZGVudGlhbHMuanNvbicKU0NPUEVTID0gWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLmZpbGUnXQoKIyBDw7NkaWdvcyBkZSBjb2xvcgpjbGFzcyBDb2xvcnM6CiAgICBHUkVFTiA9ICdcMDMzWzkybScKICAgIFJFRCA9ICdcMDMzWzkxbScKICAgIFlFTExPVyA9ICdcMDMzWzkzbScKICAgIFJFU0VUID0gJ1wwMzNbMG0nCgpkZWYgYXV0aGVudGljYXRlX2dvb2dsZV9kcml2ZSgpOgogICAgY3JlZHMgPSBOb25lCgogICAgIyBDYXJnYXIgZWwgdG9rZW4gc2kgZXhpc3RlCiAgICB0cnk6CiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoVE9LRU5fUElDS0xFKToKICAgICAgICAgICAgd2l0aCBvcGVuKFRPS0VOX1BJQ0tMRSwgJ3JiJykgYXMgdG9rZW46CiAgICAgICAgICAgICAgICBjcmVkcyA9IHBpY2tsZS5sb2FkKHRva2VuKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYie0NvbG9ycy5SRUR9RXJyb3IgYWwgY2FyZ2FyIGVsIHRva2VuOiB7ZX17Q29sb3JzLlJFU0VUfSIpCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAjIFNpIG5vIGhheSBjcmVkZW5jaWFsZXMgdsOhbGlkYXMsIGF1dGVudGljYW1vcwogICAgaWYgbm90IGNyZWRzIG9yIG5vdCBjcmVkcy52YWxpZDoKICAgICAgICBpZiBjcmVkcyBhbmQgY3JlZHMuZXhwaXJlZCBhbmQgY3JlZHMucmVmcmVzaF90b2tlbjoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgY3JlZHMucmVmcmVzaChSZXF1ZXN0KCkpCiAgICAgICAgICAgIGV4Y2VwdCBnb29nbGUuYXV0aC5leGNlcHRpb25zLlJlZnJlc2hFcnJvcjoKICAgICAgICAgICAgICAgIHByaW50KGYie0NvbG9ycy5SRUR9RXJyb3I6IE5vIHNlIHB1ZG8gcmVmcmVzY2FyIGVsIHRva2VuLiBFcyBwb3NpYmxlIHF1ZSBoYXlhIHVuIHByb2JsZW1hIGRlIHJlZC57Q29sb3JzLlJFU0VUfSIpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICMgVmVyaWZpY2FyIHNpIGVsIGFyY2hpdm8gZGUgY3JlZGVuY2lhbGVzIGV4aXN0ZQogICAgICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKENMSUVOVF9TRUNSRVRfRklMRSk6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLlJFRH1FbCBhcmNoaXZvIGRlIGNyZWRlbmNpYWxlcyB7Q0xJRU5UX1NFQ1JFVF9GSUxFfSBubyBzZSBlbmNvbnRyw7Mue0NvbG9ycy5SRVNFVH0iKQogICAgICAgICAgICAgICAgICAgIHByaW50KGYie0NvbG9ycy5ZRUxMT1d9QXNlZ8O6cmF0ZSBkZSBoYWJlciBzdWJpZG8gZWwgYXJjaGl2byAnY3JlZGVudGlhbHMuanNvbicgbyBkZSBxdWUgZXN0w6kgY29ycmVjdGFtZW50ZSByZW5vbWJyYWRvLntDb2xvcnMuUkVTRVR9IikKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgICAgIGZsb3cgPSBGbG93LmZyb21fY2xpZW50X3NlY3JldHNfZmlsZShDTElFTlRfU0VDUkVUX0ZJTEUsIFNDT1BFUykKICAgICAgICAgICAgICAgIGZsb3cucmVkaXJlY3RfdXJpID0gJ3VybjppZXRmOndnOm9hdXRoOjIuMDpvb2InICAjIFVSSSBzaW4gY2FsbGJhY2sKCiAgICAgICAgICAgICAgICAjIEdlbmVyYXIgbGEgVVJMIGRlIGF1dG9yaXphY2nDs24KICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25fdXJsLCBfID0gZmxvdy5hdXRob3JpemF0aW9uX3VybChwcm9tcHQ9J2NvbnNlbnQnKQogICAgICAgICAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLkdSRUVOfVBvciBmYXZvciwgYWJyZSBsYSBzaWd1aWVudGUgVVJMIHBhcmEgYXV0b3JpemFyIGxhIGFwbGljYWNpw7NuOiB7YXV0aG9yaXphdGlvbl91cmx9e0NvbG9ycy5SRVNFVH0iKQoKICAgICAgICAgICAgICAgICMgQWJyZSBlbCBuYXZlZ2Fkb3IgcGFyYSBxdWUgZWwgdXN1YXJpbyBhdXRvcmljZSBsYSBhcGxpY2FjacOzbgogICAgICAgICAgICAgICAgd2ViYnJvd3Nlci5vcGVuKGF1dGhvcml6YXRpb25fdXJsKQoKICAgICAgICAgICAgICAgICMgRWwgdXN1YXJpbyBkZWJlIGluZ3Jlc2FyIGVsIGPDs2RpZ28gbWFudWFsbWVudGUKICAgICAgICAgICAgICAgIGNvZGUgPSBpbnB1dCgiUG9yIGZhdm9yLCBpbmdyZXNhIGVsIGPDs2RpZ28gZGUgYXV0b3JpemFjacOzbjogIikKICAgICAgICAgICAgICAgIGZsb3cuZmV0Y2hfdG9rZW4oY29kZT1jb2RlKQogICAgICAgICAgICAgICAgY3JlZHMgPSBmbG93LmNyZWRlbnRpYWxzCiAgICAgICAgICAgIGV4Y2VwdCBnb29nbGUuYXV0aC5leGNlcHRpb25zLkdvb2dsZUF1dGhFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgIyBNYW5lamFyIGN1YWxxdWllciBlcnJvciByZWxhY2lvbmFkbyBjb24gR29vZ2xlIEF1dGgKICAgICAgICAgICAgICAgIHByaW50KGYie0NvbG9ycy5SRUR9RXJyb3IgZHVyYW50ZSBsYSBhdXRlbnRpY2FjacOzbjoge2V9e0NvbG9ycy5SRVNFVH0iKQogICAgICAgICAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLllFTExPV31QYXJlY2UgcXVlIGh1Ym8gdW4gZXJyb3IgYWwgYXV0ZW50aWNhci4gRXMgcHJvYmFibGUgcXVlIHRlbmdhcyBxdWUgcmVwZXRpciB0b2RvcyBsb3MgcGFzb3Mgc2Vnw7puIGVsIHZpZGVvIGRlIGluc3RhbGFjacOzbi57Q29sb3JzLlJFU0VUfSIpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludChmIntDb2xvcnMuUkVEfUVycm9yIGluZXNwZXJhZG8gZHVyYW50ZSBsYSBhdXRlbnRpY2FjacOzbjoge2V9e0NvbG9ycy5SRVNFVH0iKQogICAgICAgICAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLllFTExPV31FcyBwb3NpYmxlIHF1ZSBuZWNlc2l0ZXMgcmVwZXRpciBlbCBwcm9jZXNvIGRlc2RlIGVsIHByaW5jaXBpbywgc2lndWllbmRvIGVsIHZpZGVvIGRlIGluc3RhbGFjacOzbi57Q29sb3JzLlJFU0VUfSIpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgIyBHdWFyZGFyIGVsIHRva2VuCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdpdGggb3BlbihUT0tFTl9QSUNLTEUsICd3YicpIGFzIHRva2VuOgogICAgICAgICAgICAgICAgICAgIHBpY2tsZS5kdW1wKGNyZWRzLCB0b2tlbikKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLlJFRH1FcnJvciBhbCBndWFyZGFyIGVsIHRva2VuOiB7ZX17Q29sb3JzLlJFU0VUfSIpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIHJldHVybiBjcmVkcwoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGNyZWRzID0gYXV0aGVudGljYXRlX2dvb2dsZV9kcml2ZSgpCiAgICBpZiBjcmVkczoKICAgICAgICBwcmludChmIntDb2xvcnMuR1JFRU59QXV0ZW50aWNhY2nDs24gY29tcGxldGFkYSB5IHRva2VuIGd1YXJkYWRvLntDb2xvcnMuUkVTRVR9IikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLlJFRH1FcnJvciBlbiBlbCBwcm9jZXNvIGRlIGF1dGVudGljYWNpw7NuLiBQb3IgZmF2b3IsIHJldmlzYSBsb3MgbWVuc2FqZXMgYW50ZXJpb3Jlcy57Q29sb3JzLlJFU0VUfSIpCg==').decode())"

pause

:button hacer_backup
text Realizar Backup completo y subir a Google Drive

say Iniciando el proceso de backup...

exec mkdir -p respaldos

say Copiando configuracion.json a servidor_minecraft...
exec cp configuracion.json ./servidor_minecraft

say Comprimiendo servidor_minecraft...
exec zip -r -6 -q ./respaldos/servidor_minecraft.zip ./servidor_minecraft

say Instalando Librerias...
exec pip install -q google-auth google-auth-oauthlib google-auth-httplib2 google-api-python-client

say Ejecutando el script de subida...
exec python -c "import base64; exec(base64.b64decode('aW1wb3J0IG9zCmltcG9ydCBwaWNrbGUKaW1wb3J0IHRpbWUKZnJvbSBnb29nbGUuYXV0aC50cmFuc3BvcnQucmVxdWVzdHMgaW1wb3J0IFJlcXVlc3QKZnJvbSBnb29nbGVhcGljbGllbnQuZGlzY292ZXJ5IGltcG9ydCBidWlsZApmcm9tIGdvb2dsZWFwaWNsaWVudC5odHRwIGltcG9ydCBNZWRpYUZpbGVVcGxvYWQsIEh0dHBFcnJvcgoKIyBDb2xvcmVzCmNsYXNzIENvbG9yczoKICAgIFJFU0VUID0gIlwwMzNbMG0iCiAgICBHUkVFTiA9ICJcMDMzWzkybSIKICAgIFJFRCA9ICJcMDMzWzkxbSIKICAgIFlFTExPVyA9ICJcMDMzWzkzbSIKICAgIENZQU4gPSAiXDAzM1s5Nm0iCgojIFZhcmlhYmxlcwpUT0tFTl9QSUNLTEUgPSAnLi9hZGRvbnMvdG9rZW4ucGlja2xlJwpCQUNLVVBfRklMRV9OQU1FID0gJ3NlcnZpZG9yX21pbmVjcmFmdC56aXAnCkJBQ0tVUF9QQVRIID0gJy4vcmVzcGFsZG9zL3NlcnZpZG9yX21pbmVjcmFmdC56aXAnCgpkZWYgbG9hZF9jcmVkZW50aWFscygpOgogICAgY3JlZHMgPSBOb25lCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhUT0tFTl9QSUNLTEUpOgogICAgICAgIHdpdGggb3BlbihUT0tFTl9QSUNLTEUsICdyYicpIGFzIHRva2VuOgogICAgICAgICAgICBjcmVkcyA9IHBpY2tsZS5sb2FkKHRva2VuKQogICAgICAgIGlmIGNyZWRzIGFuZCBjcmVkcy5leHBpcmVkIGFuZCBjcmVkcy5yZWZyZXNoX3Rva2VuOgogICAgICAgICAgICBjcmVkcy5yZWZyZXNoKFJlcXVlc3QoKSkKICAgIHJldHVybiBjcmVkcwoKZGVmIGRlbGV0ZV9wcmV2aW91c19iYWNrdXAoc2VydmljZSk6CiAgICB0cnk6CiAgICAgICAgcXVlcnkgPSBmIm5hbWU9J3tCQUNLVVBfRklMRV9OQU1FfScgYW5kIHRyYXNoZWQ9ZmFsc2UiCiAgICAgICAgcmVzdWx0cyA9IHNlcnZpY2UuZmlsZXMoKS5saXN0KHE9cXVlcnkpLmV4ZWN1dGUoKQogICAgICAgIGl0ZW1zID0gcmVzdWx0cy5nZXQoJ2ZpbGVzJywgW10pCiAgICAgICAgZm9yIGl0ZW0gaW4gaXRlbXM6CiAgICAgICAgICAgIHNlcnZpY2UuZmlsZXMoKS5kZWxldGUoZmlsZUlkPWl0ZW1bJ2lkJ10pLmV4ZWN1dGUoKQogICAgICAgICAgICBwcmludChmIntDb2xvcnMuWUVMTE9XfUJhY2t1cCBhbnRlcmlvciAne0JBQ0tVUF9GSUxFX05BTUV9JyBlbGltaW5hZG8ue0NvbG9ycy5SRVNFVH0iKQogICAgZXhjZXB0IEh0dHBFcnJvciBhcyBlOgogICAgICAgIHByaW50KGYie0NvbG9ycy5SRUR9RXJyb3IgYWwgZWxpbWluYXIgZWwgYmFja3VwIGFudGVyaW9yOiB7ZX17Q29sb3JzLlJFU0VUfSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLlJFRH1FcnJvciBpbmVzcGVyYWRvIGFsIGVsaW1pbmFyIGVsIGJhY2t1cCBhbnRlcmlvcjoge2V9e0NvbG9ycy5SRVNFVH0iKQoKZGVmIHVwbG9hZF9maWxlX3dpdGhfcHJvZ3Jlc3Moc2VydmljZSwgZmlsZV9wYXRoKToKICAgIHRyeToKICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoZmlsZV9wYXRoKToKICAgICAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLlJFRH1FcnJvcjogRWwgYXJjaGl2byAne2ZpbGVfcGF0aH0nIG5vIGV4aXN0ZS57Q29sb3JzLlJFU0VUfSIpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBtZWRpYSA9IE1lZGlhRmlsZVVwbG9hZChmaWxlX3BhdGgsIG1pbWV0eXBlPSdhcHBsaWNhdGlvbi96aXAnLCByZXN1bWFibGU9VHJ1ZSkKICAgICAgICBmaWxlX21ldGFkYXRhID0geyduYW1lJzogQkFDS1VQX0ZJTEVfTkFNRX0KICAgICAgICByZXF1ZXN0ID0gc2VydmljZS5maWxlcygpLmNyZWF0ZShib2R5PWZpbGVfbWV0YWRhdGEsIG1lZGlhX2JvZHk9bWVkaWEpCgogICAgICAgIHByaW50KGYie0NvbG9ycy5DWUFOfVN1YmllbmRvICd7QkFDS1VQX0ZJTEVfTkFNRX0nLi4ue0NvbG9ycy5SRVNFVH0iKQogICAgICAgIHJlc3BvbnNlID0gTm9uZQogICAgICAgIHdoaWxlIHJlc3BvbnNlIGlzIE5vbmU6CiAgICAgICAgICAgIHN0YXR1cywgcmVzcG9uc2UgPSByZXF1ZXN0Lm5leHRfY2h1bmsoKQogICAgICAgICAgICBpZiBzdGF0dXM6CiAgICAgICAgICAgICAgICBwcmludChmIlByb2dyZXNvIGRlIHN1YmlkYToge2ludChzdGF0dXMucHJvZ3Jlc3MoKSAqIDEwMCl9JSIpCiAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLkdSRUVOfUJhY2t1cCAne0JBQ0tVUF9GSUxFX05BTUV9JyBzdWJpZG8gYSBHb29nbGUgRHJpdmUgY29uIMOpeGl0by57Q29sb3JzLlJFU0VUfSIpCiAgICBleGNlcHQgSHR0cEVycm9yIGFzIGU6CiAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLlJFRH1FcnJvciBhbCBpbnRlbnRhciBzdWJpciBlbCBhcmNoaXZvIGEgR29vZ2xlIERyaXZlOiB7ZX17Q29sb3JzLlJFU0VUfSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJ7Q29sb3JzLlJFRH1FcnJvciBpbmVzcGVyYWRvIGFsIHN1YmlyIGVsIGFyY2hpdm86IHtlfXtDb2xvcnMuUkVTRVR9IikKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBjcmVkcyA9IGxvYWRfY3JlZGVudGlhbHMoKQogICAgaWYgbm90IGNyZWRzOgogICAgICAgIHByaW50KGYie0NvbG9ycy5SRUR9RXJyb3IgYWwgYXV0ZW50aWNhciwgcG9yIGZhdm9yIHZ1ZWx2ZSBhIGF1dGVudGljYXJ0ZS57Q29sb3JzLlJFU0VUfSIpCiAgICBlbHNlOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VydmljZSA9IGJ1aWxkKCdkcml2ZScsICd2MycsIGNyZWRlbnRpYWxzPWNyZWRzKQogICAgICAgICAgICBkZWxldGVfcHJldmlvdXNfYmFja3VwKHNlcnZpY2UpCiAgICAgICAgICAgIHVwbG9hZF9maWxlX3dpdGhfcHJvZ3Jlc3Moc2VydmljZSwgQkFDS1VQX1BBVEgpCiAgICAgICAgICAgIHByaW50KGYie0NvbG9ycy5HUkVFTn1PcGVyYWNpw7NuIGNvbXBsZXRhZGEgY29uIMOpeGl0by57Q29sb3JzLlJFU0VUfSIpCiAgICAgICAgZXhjZXB0IEh0dHBFcnJvciBhcyBlOgogICAgICAgICAgICBwcmludChmIntDb2xvcnMuUkVEfUVycm9yIGNvbiBsYSBBUEkgZGUgR29vZ2xlIERyaXZlOiB7ZX17Q29sb3JzLlJFU0VUfSIpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmIntDb2xvcnMuUkVEfUVycm9yIGluZXNwZXJhZG8gYWwgY29uZWN0YXIgY29uIEdvb2dsZSBEcml2ZToge2V9e0NvbG9ycy5SRVNFVH0iKQo=').decode())"

say Proceso terminado.
pause

:button restaurar_backup
text Restaurar servidor_minecraft desde la ultima copia de seguridad subida.

say Iniciando el proceso de restauración...

exec mkdir -p respaldos

say Instalando Librerias...
exec pip install -q google-auth google-auth-oauthlib google-auth-httplib2 google-api-python-client

say Ejecutando el script de restauración...
exec python -c "import base64; exec(base64.b64decode('aW1wb3J0IG9zCmltcG9ydCBwaWNrbGUKaW1wb3J0IHppcGZpbGUKaW1wb3J0IHNodXRpbAppbXBvcnQgaW8KZnJvbSBnb29nbGVhcGljbGllbnQuZGlzY292ZXJ5IGltcG9ydCBidWlsZApmcm9tIGdvb2dsZWFwaWNsaWVudC5odHRwIGltcG9ydCBNZWRpYUlvQmFzZURvd25sb2FkCmZyb20gZ29vZ2xlLmF1dGgudHJhbnNwb3J0LnJlcXVlc3RzIGltcG9ydCBSZXF1ZXN0CgojIFZhcmlhYmxlcwpUT0tFTl9QSUNLTEUgPSAnLi9hZGRvbnMvdG9rZW4ucGlja2xlJwpHUkVFTiA9ICdcMDMzWzkybScgICMgVmVyZGUKWUVMTE9XID0gJ1wwMzNbOTNtJyAgIyBBbWFyaWxsbwpSRUQgPSAnXDAzM1s5MW0nICAjIFJvam8KUkVTRVQgPSAnXDAzM1swbScgICMgUmVzZXRlYSBlbCBjb2xvcgoKZGVmIGF1dGhlbnRpY2F0ZV9nb29nbGVfZHJpdmUoKToKICAgIGNyZWRzID0gTm9uZQogICAgaWYgb3MucGF0aC5leGlzdHMoVE9LRU5fUElDS0xFKToKICAgICAgICB3aXRoIG9wZW4oVE9LRU5fUElDS0xFLCAncmInKSBhcyB0b2tlbjoKICAgICAgICAgICAgY3JlZHMgPSBwaWNrbGUubG9hZCh0b2tlbikKCiAgICBpZiBjcmVkcyBhbmQgY3JlZHMuZXhwaXJlZCBhbmQgY3JlZHMucmVmcmVzaF90b2tlbjoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNyZWRzLnJlZnJlc2goUmVxdWVzdCgpKQogICAgICAgICAgICB3aXRoIG9wZW4oVE9LRU5fUElDS0xFLCAnd2InKSBhcyB0b2tlbjoKICAgICAgICAgICAgICAgIHBpY2tsZS5kdW1wKGNyZWRzLCB0b2tlbikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYie1JFRH1FcnJvciBhbCByZWZyZXNjYXIgZWwgdG9rZW46IHtlfXtSRVNFVH0iKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgZWxpZiBub3QgY3JlZHM6CiAgICAgICAgcHJpbnQoZiJ7UkVEfUVycm9yOiBFbCBhcmNoaXZvICd0b2tlbi5waWNrbGUnIG5vIHNlIGVuY29udHLDsy4gUG9yIGZhdm9yLCBhdXRlbnRpY2EgbGEgYXBsaWNhY2nDs24gcHJpbWVyby57UkVTRVR9IikKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHByaW50KGYie0dSRUVOfUF1dGVudGljYWNpw7NuIGNvbXBsZXRhZGEue1JFU0VUfSIpCiAgICByZXR1cm4gY3JlZHMKCmRlZiBnZXRfZmlsZV9pZChmaWxlX25hbWUpOgogICAgY3JlZHMgPSBhdXRoZW50aWNhdGVfZ29vZ2xlX2RyaXZlKCkKICAgIGlmIGNyZWRzIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICB0cnk6CiAgICAgICAgc2VydmljZSA9IGJ1aWxkKCdkcml2ZScsICd2MycsIGNyZWRlbnRpYWxzPWNyZWRzKQogICAgICAgIHF1ZXJ5ID0gZiJuYW1lPSd7ZmlsZV9uYW1lfSciCiAgICAgICAgcmVzdWx0cyA9IHNlcnZpY2UuZmlsZXMoKS5saXN0KHE9cXVlcnksIGZpZWxkcz0iZmlsZXMoaWQsIG5hbWUsIHNpemUpIikuZXhlY3V0ZSgpCiAgICAgICAgaXRlbXMgPSByZXN1bHRzLmdldCgnZmlsZXMnLCBbXSkKCiAgICAgICAgaWYgbm90IGl0ZW1zOgogICAgICAgICAgICBwcmludChmIntZRUxMT1d9Tm8gc2UgZW5jb250csOzIGVsIGFyY2hpdm86IHtmaWxlX25hbWV9e1JFU0VUfSIpCiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgICAgIGZpbGVfc2l6ZSA9IGZvcm1hdF9zaXplKGludChpdGVtc1swXVsnc2l6ZSddKSkKICAgICAgICBwcmludChmIntHUkVFTn1BcmNoaXZvIGVuY29udHJhZG86IHtpdGVtc1swXVsnbmFtZSddfSAoSUQ6IHtpdGVtc1swXVsnaWQnXX0sIFRhbWHDsW86IHtmaWxlX3NpemV9KXtSRVNFVH0iKQogICAgICAgIHJldHVybiBpdGVtc1swXVsnaWQnXSwgaXRlbXNbMF0uZ2V0KCdzaXplJykKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIntSRUR9RXJyb3IgYWwgYnVzY2FyIGVsIGFyY2hpdm86IHtlfXtSRVNFVH0iKQogICAgICAgIHJldHVybiBOb25lCgpkZWYgZG93bmxvYWRfZmlsZShmaWxlX2lkLCBkZXN0aW5hdGlvbik6CiAgICBjcmVkcyA9IGF1dGhlbnRpY2F0ZV9nb29nbGVfZHJpdmUoKQogICAgaWYgY3JlZHMgaXMgTm9uZToKICAgICAgICByZXR1cm4KCiAgICB0cnk6CiAgICAgICAgc2VydmljZSA9IGJ1aWxkKCdkcml2ZScsICd2MycsIGNyZWRlbnRpYWxzPWNyZWRzKQogICAgICAgIHJlcXVlc3QgPSBzZXJ2aWNlLmZpbGVzKCkuZ2V0X21lZGlhKGZpbGVJZD1maWxlX2lkKQogICAgICAgIGZoID0gaW8uQnl0ZXNJTygpCiAgICAgICAgZG93bmxvYWRlciA9IE1lZGlhSW9CYXNlRG93bmxvYWQoZmgsIHJlcXVlc3QpCiAgICAgICAgZG9uZSA9IEZhbHNlCgogICAgICAgIHdoaWxlIG5vdCBkb25lOgogICAgICAgICAgICBzdGF0dXMsIGRvbmUgPSBkb3dubG9hZGVyLm5leHRfY2h1bmsoKQogICAgICAgICAgICBwcmludChmJ0Rlc2NhcmdhbmRvOiB7aW50KHN0YXR1cy5wcm9ncmVzcygpICogMTAwKX0lJykKCiAgICAgICAgZmguc2VlaygwKQogICAgICAgIHdpdGggb3BlbihkZXN0aW5hdGlvbiwgJ3diJykgYXMgZjoKICAgICAgICAgICAgZi53cml0ZShmaC5yZWFkKCkpCgogICAgICAgIHByaW50KGYne0dSRUVOfUFyY2hpdm8gZGVzY2FyZ2Fkbzoge2Rlc3RpbmF0aW9ufXtSRVNFVH0nKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYie1JFRH1FcnJvciBhbCBkZXNjYXJnYXIgZWwgYXJjaGl2bzoge2V9e1JFU0VUfSIpCgpkZWYgdW56aXBfZmlsZV93aXRoX3ppcGZpbGUoemlwX3BhdGgsIGV4dHJhY3RfdG8pOgogICAgcHJpbnQoZid7WUVMTE9XfURlc2NvbXByaW1pZW5kbyB7emlwX3BhdGh9IHVzYW5kbyB6aXBmaWxlLi4ue1JFU0VUfScpCiAgICB0cnk6CiAgICAgICAgd2l0aCB6aXBmaWxlLlppcEZpbGUoemlwX3BhdGgsICdyJykgYXMgemlwX3JlZjoKICAgICAgICAgICAgemlwX3JlZi5leHRyYWN0YWxsKGV4dHJhY3RfdG8pCiAgICAgICAgICAgIHByaW50KGYne0dSRUVOfUFyY2hpdm8gZGVzY29tcHJpbWlkbyBlbjoge2V4dHJhY3RfdG99e1JFU0VUfScpCiAgICBleGNlcHQgemlwZmlsZS5CYWRaaXBGaWxlOgogICAgICAgIHByaW50KGYie1JFRH1FcnJvcjogRWwgYXJjaGl2byB6aXAgZXMgaW52w6FsaWRvIChCYWRaaXBGaWxlKS57UkVTRVR9IikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIntSRUR9RXJyb3IgYWwgZGVzY29tcHJpbWlyOiB7ZX17UkVTRVR9IikKCmRlZiBmb3JtYXRfc2l6ZShzaXplKToKICAgICIiIkZvcm1hdGVhIGVsIHRhbWHDsW8gZGVsIGFyY2hpdm8gZW4gYnl0ZXMgYSB1biBmb3JtYXRvIGxlZ2libGUuIiIiCiAgICBpZiBzaXplIDwgMTAyNDoKICAgICAgICByZXR1cm4gZiJ7c2l6ZX0gQiIKICAgIGVsaWYgc2l6ZSA8IDEwMjQgKiogMjoKICAgICAgICByZXR1cm4gZiJ7c2l6ZSAvIDEwMjQ6LjJmfSBLQiIKICAgIGVsaWYgc2l6ZSA8IDEwMjQgKiogMzoKICAgICAgICByZXR1cm4gZiJ7c2l6ZSAvICgxMDI0ICoqIDIpOi4yZn0gTUIiCiAgICBlbHNlOgogICAgICAgIHJldHVybiBmIntzaXplIC8gKDEwMjQgKiogMyk6LjJmfSBHQiIKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAjIEF1dGVudGljYWNpw7NuIGFudGVzIGRlIHJlYWxpemFyIGN1YWxxdWllciBvcGVyYWNpw7NuCiAgICBjcmVkcyA9IGF1dGhlbnRpY2F0ZV9nb29nbGVfZHJpdmUoKQogICAgaWYgY3JlZHMgaXMgTm9uZToKICAgICAgICBleGl0KDEpICAjIFNhbGlyIHNpIGxhIGF1dGVudGljYWNpw7NuIGZhbGxhCgogICAgZmlsZV9uYW1lID0gJ3NlcnZpZG9yX21pbmVjcmFmdC56aXAnCiAgICBmaWxlX2luZm8gPSBnZXRfZmlsZV9pZChmaWxlX25hbWUpCgogICAgaWYgZmlsZV9pbmZvOgogICAgICAgICMgRWxpbWluYXIgbGEgY2FycGV0YSAnc2Vydmlkb3JfbWluZWNyYWZ0JyBzaSBleGlzdGUKICAgICAgICBmb2xkZXJfdG9fZGVsZXRlID0gJy4vc2Vydmlkb3JfbWluZWNyYWZ0JwogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGZvbGRlcl90b19kZWxldGUpOgogICAgICAgICAgICBzaHV0aWwucm10cmVlKGZvbGRlcl90b19kZWxldGUpCiAgICAgICAgICAgIHByaW50KGYne0dSRUVOfUNhcnBldGEgZWxpbWluYWRhOiB7Zm9sZGVyX3RvX2RlbGV0ZX17UkVTRVR9JykKCiAgICAgICAgZmlsZV9pZCwgZXhwZWN0ZWRfc2l6ZSA9IGZpbGVfaW5mbwogICAgICAgIGRlc3RpbmF0aW9uX2ZvbGRlciA9ICcuL3Jlc3BhbGRvcycKICAgICAgICBvcy5tYWtlZGlycyhkZXN0aW5hdGlvbl9mb2xkZXIsIGV4aXN0X29rPVRydWUpCiAgICAgICAgZGVzdGluYXRpb24gPSBvcy5wYXRoLmpvaW4oZGVzdGluYXRpb25fZm9sZGVyLCBmaWxlX25hbWUpCgogICAgICAgIGRvd25sb2FkX2ZpbGUoZmlsZV9pZCwgZGVzdGluYXRpb24pCgogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGRlc3RpbmF0aW9uKToKICAgICAgICAgICAgcHJpbnQoZiJ7R1JFRU59RWwgYXJjaGl2byBleGlzdGUgZW46IHtkZXN0aW5hdGlvbn17UkVTRVR9IikKICAgICAgICAgICAgdW56aXBfZmlsZV93aXRoX3ppcGZpbGUoZGVzdGluYXRpb24sICcuLycpICAjIERlc2NvbXByaW1pciBlbiBsYSBjYXJwZXRhIGFjdHVhbAogICAgICAgICAgICBvcy5yZW1vdmUoZGVzdGluYXRpb24pICAjIEVsaW1pbmFyIGVsIHppcCBkZXNwdcOpcyBkZSBkZXNjb21wcmltaXIKICAgICAgICAgICAgcHJpbnQoZid7R1JFRU59QXJjaGl2byB6aXAgZWxpbWluYWRvOiB7ZGVzdGluYXRpb259e1JFU0VUfScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJ7UkVEfUVycm9yOiBFbCBhcmNoaXZvIG5vIHNlIGRlc2NhcmfDsy57UkVTRVR9IikK').decode())"

say Moviendo configuracion.json fuera del servidor_minecraft...
exec rm ./configuracion.json
exec mv ./servidor_minecraft/configuracion.json ./

say Proceso termiado.
pause

:button cambios
text Ver Cambios | v1.1

say Se agrego manejo de errores y colores.
say Se agrego Auto-Update.
say Se agrego este boton.
say Cualquier error o bug, verificar que hayan hecho bien la instalacion. En todo caso me mencionan en discord @Mattezs..
pause

